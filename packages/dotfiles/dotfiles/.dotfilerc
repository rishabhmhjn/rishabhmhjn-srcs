#!/usr/bin/env bash
# dotfilerc - Entry point for shell dotfiles.
# Add this line to your ~/.zshrc or ~/.zprofile:
#   source ~/.dotfiles/current/.dotfilerc

DOTFILES="$HOME/.dotfiles/current"

[[ -f "$DOTFILES/.aliases" ]]     && source "$DOTFILES/.aliases"
[[ -f "$DOTFILES/.functions" ]]   && source "$DOTFILES/.functions"
[[ -f "$DOTFILES/.zsh-plugins" ]] && source "$DOTFILES/.zsh-plugins"
if [[ -n "${ZSH_VERSION:-}" && -s "$DOTFILES/.git-flow-completions" ]]; then
  # Load git-flow completions after startup compinit calls complete.
  autoload -Uz add-zsh-hook
  _dotfiles_source_git_flow_completion_once() {
    [[ -n "${_DOTFILES_GIT_FLOW_COMPLETION_LOADED:-}" ]] && return
    whence -w compdef >/dev/null 2>&1 || return
    source "$DOTFILES/.git-flow-completions"
    export _DOTFILES_GIT_FLOW_COMPLETION_LOADED=1
    add-zsh-hook -d precmd _dotfiles_source_git_flow_completion_once 2>/dev/null || true
  }
  add-zsh-hook precmd _dotfiles_source_git_flow_completion_once
  _dotfiles_source_git_flow_completion_once
fi

# History
export HISTFILESIZE=10000
export HISTSIZE=10000
HISTCONTROL=ignoredups

# PATH
PATH="/usr/local/bin:/usr/local/sbin:$PATH"
[[ -d "$HOME/.scripts" ]] && export PATH="$HOME/.scripts:$PATH"

# Pager
export LESS="-R"

# Locale
export LC_ALL=en_US.UTF-8
export LANG=en_US.UTF-8

# Editor
export EDITOR=vim

# Bash completion
if [ -f /etc/bash_completion ] && ! shopt -oq posix; then
  . /etc/bash_completion
fi

# rbenv
if [ -d "$HOME/.rbenv/bin" ]; then
  export PATH="$HOME/.rbenv/bin:$PATH"
  eval "$(rbenv init -)"
fi

# rvm
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm"
